<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Emotion Detection</title>
</head>

<body align="center">

    <h2>Emotion Detection (Text Based)</h2>

    <textarea id="textInput" rows="2" cols="40" placeholder="Enter your text here"></textarea>
    <br><br>

    <button id="btn" onclick="detectEmotion()">Detect Emotion</button>

    <p id="output"></p>

    <script>
        function detectEmotion() {
            let btn = document.getElementById("btn");
            let output = document.getElementById("output");
            let text = document.getElementById("textInput").value;

            // UI feedback
            btn.disabled = true;
            output.innerText = "Analyzing emotion... ⏳";

            fetch("https://percept-backend.onrender.com/analyze", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({ text: text })
            })
                .then(res => res.json())
                .then(data => {
                    output.innerText = "Detected Emotion: " + data.emotion;
                })
                .catch(() => {
                    output.innerText = "Server waking up, please try again ⏳";
                })
                .finally(() => {
                    btn.disabled = false;
                });
        }
    </script>

</body>

</html>
